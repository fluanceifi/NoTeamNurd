<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload - Video Stream</title>
</head>
<body>

<h3>Live Video Stream</h3>
<img src="{{ url_for('video_feed') }}" width="50%" id="video-stream">

<!-- 촬영 버튼 -->
<button id="capture-btn">📸 촬영</button>

<!-- 캡처된 이미지 표시 -->
<h3>Captured Image</h3>
<img id="captured-image" src="" width="50%" style="display: none;">

<!-- HSV 결과 출력 영역 -->
<div id="result" style="margin-top: 20px;"></div>

<script>
    document.getElementById('capture-btn').addEventListener('click', function () {
        fetch('/capture', { method: 'POST' })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    // HSV/RGB 결과 출력
                    const result = data.result;
                    const resultDiv = document.getElementById('result');
                    resultDiv.innerHTML = `
                        <h3>🎨 분석된 피부 색상 정보</h3>
                        <p><strong>RGB:</strong> R=${result.r}, G=${result.g}, B=${result.b}</p>
                        <p><strong>HSV:</strong> H=${result.h}, S=${result.s}, V=${result.v}</p>
                    `;
                } else {
                    alert("❌ 촬영 실패: " + data.error);
                }
            })
            .catch(error => console.error('Error:', error));
    });
</script>

</body>
</html>
